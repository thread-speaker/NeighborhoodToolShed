<h1> Prototyping for lending, borrowing, and transaction history</h1>
<style>
	.new {
		background-color: beige
	}
	.pending {
		background-color: tan
	}
	.approved {
		background-color: lightblue
	}
	.rejected {
		background-color: pink
	}
	.cancelled {
		background-color: lightgray
	}
	.committed {
		background-color: lightgreen
	}
	#transaction-history-panel {
		width: 600px;
	}
	.respondent-actions {
		float: right;
	}
	.small-box {
		/* float: right; */
		width: 20px;
		height: 20px;
		/* margin: 5px; */
	}
</style>
<span class="text-left">
	<br/>
	<div style="width:300px">
	
		Transaction status colors: <br/>
		new: <div class="small-box new"></div>
		pending: <div class="small-box pending"></div>
		approved: <div class="small-box approved"></div>
		rejected: <div class="small-box rejected"></div>
		committed: <div class="small-box committed"></div>
		cancelled: <div class="small-box cancelled"></div>
	</div>
	<br/>
</span>

<div id="transaction-history-panel" align="left">
	<span class="addTool glyphicon-plus text-left" ng-click="createNewRequest()">Make a new request</span>
	<ul class="list-group">
		<li ng-repeat="t in transactions" class="list-group-item" ng-class="[t.transactionStatus]">
			<span>Borrower: {{t.Borrower}}</span>
			<span>, Lender: {{t.Lender}}</span>
			<span>, Tool: {{t.ToolLoaned}}</span><br/>
			<span>, Start: {{t.TransactionPeriod.Start}}</span>
			<span>, End: {{t.TransactionPeriod.End}}</span>
			<span ng-if="getUserId()==t.Lender && t.transactionStatus=='pending'" class="respondent-actions">
				<input type=button class="btn-sm" value="approve" ng-click="advanceTransaction(t)"//>
				<input type=button class="btn-sm" value="reject" ng-click="termTransaction(t)"//>
			</span>
			<span ng-if="getUserId()==t.Borrower && t.transactionStatus=='approved'" class="respondent-actions">
				<input type=button class="btn-sm" value="commit" ng-click="advanceTransaction(t)"/>
				<input type=button class="btn-sm" value="cancel"ng-click="termTransaction(t)"/>
			</span>
			<span ng-if="t.transactionStatus=='new'">
				<!-- Lender: <input type=text ng&#45;model="t.Lender"/> -->
				<!-- Tool: <input type=text ng&#45;model="t.Tool"/> -->
				<br/>
				Lender: <select ng-model="t.Lender">
					<option ng-repeat="user in mockUsers" >{{user}}</option>
				</select>
				Tool: <select ng-model="t.ToolLoaned">
					<option ng-repeat="tool in mockTools" ng-value="tool">{{tool}}</option>
				</select>	
			</select>
			Rental period length (in weeks): <select ng-model="t.TransactionPeriod.End">
				<option ng-repeat="n in [1,2,3,4,5,6,7,8]" ng-value="getEndDate(t.TransactionPeriod.Start,n)">{{n}}</option>
			</select>
			<input type=button class="btn-sm" value="send request" ng-click="sendNewRequest(t)"/>
		</span>
		<br/>
	</li>
</ul>
	</div>
